!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="31e3f470-589d-4241-87b9-f632b19199f5",e._sentryDebugIdIdentifier="sentry-dbid-31e3f470-589d-4241-87b9-f632b19199f5")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7498],{1557:function(e,t,n){n.d(t,{U:function(){return r}});let r=(0,n(52983).createContext)({})},79187:function(e,t,n){n.d(t,{u:function(){return x}});var r=n(97458),o=n(52983),a=n(23113),l=n(90312),c=n(91394),u=n(25288),i=n(19170),s=n(7616),d=n(45451);let f=()=>(0,o.useCallback)(e=>{let{collectionId:t,collectionName:n,fileId:r,location:o}=e;(0,d.sendGTMEvent)({collection_id:t,collection_name:n,event_name:"add_to_collection",event:"ga4event",file_id:r,location:o})},[]),m=()=>(0,o.useCallback)(e=>{let{location:t,fileId:n}=e;(0,d.sendGTMEvent)({event:"ga4event",event_name:"collect",location:t,file_id:n})},[]);var v=n(49504),h=n(63202);let g=async e=>{let{id:t,collectionId:n,resourceType:r}=e,o=new URLSearchParams;return o.append("collectionId",n.toString()),o.set("resourceType",r),await (0,h.c)("/api/user/resources/".concat(t,"/collections?").concat(o.toString()),"DELETE")},p=async e=>{let{id:t,collectionId:n,resourceType:r}=e;return await (0,h.c)("/api/user/resources/".concat(t,"/collections"),"POST",{collectionId:n,resourceType:r})};var w=n(94498),y=n(2983),_=n(58058),b=n.n(_),C=n(10893);let k=()=>{let{t:e}=(0,C.$G)("detailCommon");return(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2 px-4 py-2 text-sm text-surface-foreground-1",children:[(0,r.jsx)("span",{className:"whitespace-nowrap text-sm font-semibold text-surface-foreground-1",children:e("savedSuccessfully")}),(0,r.jsx)(b(),{href:"/user/collections",legacyBehavior:!0,children:(0,r.jsx)("span",{className:"cursor-pointer whitespace-nowrap text-xs font-normal !text-surface-foreground-accent-0",children:e("seeMyCollections")})})]})},R=e=>{let{type:t,id:n,location:d}=e,[h,_]=(0,o.useState)(null),b=(0,o.useRef)(!1),[C,R]=(0,o.useState)(!1),[E,I]=(0,o.useState)(null),N=(0,s.b9)(w.mX),O=f(),x=m(),T=(0,a.a)("smMax"),S=(0,c.d)(),P=(0,u.NL)(),j=(0,v.gx)(),{signUpUrl:D,setLoginCookies:L}=(0,l.e)(),{openToast:M}=(0,i.x_)(),U=(0,o.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!b.current||e)try{e?j():N(!0);let t=await P.fetchQuery((0,v.us)({page:1,resourceId:n}));I(t),b.current=!0}catch(e){console.error("Error fetching collections when opening the popover:",e)}finally{e||N(!1)}},[P,n,N,j]),z=async()=>{if(!S){L(),window.location.href=D;return}(0,y.B)(t,"add_to_collection"),await U(),R(!0),x({location:d,fileId:n})},Q=e=>_(t=>[...null!=t?t:[],e]),A=e=>_(t=>{var n;return null!==(n=null==t?void 0:t.filter(t=>t!==e))&&void 0!==n?n:[]}),H=(0,o.useCallback)(async(e,o)=>{try{Q(e),await p({id:n,collectionId:e,resourceType:t}),O({fileId:n,collectionId:e,collectionName:o,location:d}),M({message:(0,r.jsx)(k,{}),showIcon:!1,showCloseButton:!1,position:T?"bottom-center":"top-right"}),await U(!0)}catch(e){console.error(e),M()}finally{A(e),T&&R(!1)}},[n,t,O,d,M,T,U]);return{responseCollections:E,collectionIdsLoading:h,isOpen:C,setIsOpen:R,onButtonOpenClick:z,handleAddToCollection:H,handleRemoveFromCollection:(0,o.useCallback)(async e=>{try{Q(e),await g({id:n,collectionId:e,resourceType:t}),await U(!0)}catch(e){console.error(e),M()}finally{A(e)}},[n,M,t,U]),handleOpenChange:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];R(e)}}};var E=n(99);let I=()=>{let{data:e,meta:{pagination:{nextPage:t}}}=(0,s.Dv)(w.HQ);return{collections:e,nextPage:t}},N=()=>{let{collections:e,nextPage:t}=I(),[n,r]=(0,o.useState)([]),a=(0,s.b9)(w.GD),l=(0,o.useRef)();(0,o.useEffect)(()=>{(null==e?void 0:e.length)>0&&r(e.map(E.V))},[e,t]);let c=null!==t,u=t=>{r((null==e?void 0:e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase()))).map(E.V))},i=async e=>{l.current&&clearTimeout(l.current),l.current=setTimeout(async()=>{a(e)},350)};return{isSearchByApi:c,searchCollections:n,handleSearch:e=>{c?i(e):u(e)}}};var O=n(1557);let x=e=>{let{children:t,id:n,type:a,location:l}=e,{responseCollections:c,collectionIdsLoading:u,isOpen:i,setIsOpen:s,onButtonOpenClick:d,handleOpenChange:f,handleAddToCollection:m,handleRemoveFromCollection:v}=R({type:a,id:n,location:l}),{searchCollections:h,isSearchByApi:g,handleSearch:p}=N(),w=(0,o.useMemo)(()=>({id:n,type:a,searchCollections:h,responseCollections:c,collectionIdsLoading:u,isSearchByApi:g,isOpen:i,setIsOpen:s,handleSearch:p,handleAddToCollection:m,handleRemoveFromCollection:v,onButtonOpenClick:d,handleOpenChange:f}),[n,a,h,c,u,g,i,d,s,m,v,p,f]);return(0,r.jsx)(O.U.Provider,{value:w,children:t})}},88659:function(e,t,n){n.d(t,{r:function(){return a}});var r=n(52983),o=n(1557);let a=()=>(0,r.useContext)(o.U)},99:function(e,t,n){n.d(t,{V:function(){return r}});let r=e=>{var t,n;return{id:e.id,name:e.name,author:(null===(t=e.author)||void 0===t?void 0:t.name)||void 0,hasResourceInCollection:e.hasResourceInCollection,preview:null===(n=e.previews[0])||void 0===n?void 0:n.url}}},65724:function(e,t,n){n.d(t,{W:function(){return l}});var r=n(49558),o=n(52983),a=n(21455);let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"resource_detail_premium",{setShowModal:l,setOrigin:c,setTrackerClick:u,setResourceData:i,setCheckoutQueryParams:s,setModalType:d}=(0,a.u)(),f=(0,o.useMemo)(()=>({category:t,location:n,ACTION:"go_premium",...e&&{resource_id:e}}),[t,n,e]),[m,v]=(0,r.n9)(f);return(0,o.useCallback)(e=>{let{resourceData:t,origin:n,onButtonClick:r=()=>void 0,checkoutQueryParams:o,modalType:a="premiumContent"}=e;c(n),u(()=>v),i(t),s(o),d(a),m(),r(),l(!0)},[c,u,i,s,d,m,l,v])}},55201:function(e,t,n){n.d(t,{h:function(){return r},l:function(){return o}});let r="sendToAISuiteEvent",o="/pikaso"},80719:function(e,t,n){n.d(t,{X:function(){return o}});var r=n(63202);let o=e=>{let{page:t,resourceId:n,searchTerm:o,collectionIds:a,ownership:l}=e,c=a?a.join(","):void 0,u={page:"".concat(t),...n&&{resourceId:"".concat(n)},...o&&{"filter[term]":o},...c&&{"filter[ids]":c},...l&&{"filter[ownership]":l}},i="/api/user/collections?".concat(new URLSearchParams(u));return(0,r.c)(i,"GET")}},49504:function(e,t,n){n.d(t,{gx:function(){return m},lL:function(){return f},us:function(){return d}});var r=n(59077),o=n(78511),a=n(25288),l=n(7616),c=n(52983),u=n(80719),i=n(94498);let s=["collections","all"],d=e=>{let{page:t,searchTerm:n,resourceId:o}=e;return(0,r.C)({queryKey:[...s,{page:t,resourceId:o,searchTerm:n}],queryFn:async()=>{let{data:e,success:r}=await (0,u.X)({page:t,resourceId:o,searchTerm:n});if(!r)throw Error(e);return e}})},f=e=>{let{page:t=1,resourceId:n}=e,r=(0,l.Dv)(i.GD);return(0,o.a)(d({page:t,searchTerm:r,resourceId:null!=n?n:null}))},m=()=>{let e=(0,a.NL)();return(0,c.useCallback)(()=>{e.invalidateQueries({queryKey:s})},[e])}},94498:function(e,t,n){n.d(t,{GD:function(){return o},HQ:function(){return a},mX:function(){return c},w0:function(){return l}});var r=n(24399);let o=(0,n(73139).rw)(null),a=(0,r.cn)({data:[],meta:{pagination:{nextPage:null,perPage:0,prevPage:null,currentPage:0}}}),l=(0,r.cn)([]),c=(0,r.cn)(!1)},21455:function(e,t,n){n.d(t,{u:function(){return a}});var r=n(52983),o=n(26670);let a=()=>{let e=(0,r.useContext)(o.o);if(null===e)throw Error("useModalPricingState must be used within a ModalPricingContext");return e}},33247:function(e,t,n){n.d(t,{R:function(){return s}});var r=n(51780),o=n(52983),a=n(26140);let l={ai:"photo",mockup:"vector",template:"vector"},c={keyword:"tag",collections:"collection",image_search:"search",image_search_similar:"search",user_recommendations_home:"home",popular:"search",recent:"search",family:"author"},u={"/collection":"collection"},i=()=>{let e=(0,a.Q)(),{pathname:t}=(0,r.useRouter)(),n=null==e?void 0:e.fromView;if(n){var o;return null!==(o=c[n])&&void 0!==o?o:n}return u[t]},s=()=>{let e=i();return(0,o.useCallback)(t=>{var n;let{type:r,subtype:o,authorName:a,isPremium:c,isAIGenerated:u,eventName:i,pageType:s,businessLine:d="content",editor:f,tool:m}=t,v=new URLSearchParams;v.set("business_line",d);let h=null!=s?s:e;return h&&v.set("page_type",h),v.set("item_type",null!==(n=l[r])&&void 0!==n?n:r),o&&v.set("item_subtype",o),a&&v.set("item_author",a),f&&v.set("editor",f),m&&v.set("tool",m),v.set("is_premium_item",c.toString()),v.set("is_ai_generated",u.toString()),v.set("event_name",i),v},[e])}},81612:function(e,t,n){n.d(t,{N:function(){return o}});var r=n(52983);let o=(e,t)=>(0,r.useCallback)(n=>e?{positionRelative:n%e,page:Math.floor(n/e)+(null!=t?t:1)}:{positionRelative:n,page:null!=t?t:1},[e,t])},30143:function(e,t,n){n.d(t,{O5:function(){return u.O},Y4:function(){return r.Y},aZ:function(){return i.a},fb:function(){return o.f},g9:function(){return a.g},mS:function(){return l.m},ug:function(){return s.u},yV:function(){return c.y}});var r=n(15190),o=n(46615),a=n(83196),l=n(53466),c=n(47404),u=n(6715),i=n(61390),s=n(76160)},46615:function(e,t,n){n.d(t,{f:function(){return a}});var r=n(52983),o=n(62573);let a=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{fromView:a,position:c,fromElement:u,track:i,uuid:s,query:d}=n,f=(0,o.Q)();return(0,r.useMemo)(()=>{var n;let r=null!==(n=f(e))&&void 0!==n?n:{},o=l(r={...r,...a&&{fromView:a},...c&&{position:c},...i&&{track:i},...u&&{from_element:u},...s&&{uuid:s},...d&&{query:d}});if(0===Object.keys(o).length)return t;let m=new URLSearchParams(o);return"".concat(t,"#").concat(m.toString())},[f,e,a,c,i,u,s,d,t])},l=e=>{if(!e)return{};let t={};for(let n in e)void 0!==e[n]&&null!==e[n]&&(t[n]="".concat(e[n]));return t}},53466:function(e,t,n){n.d(t,{m:function(){return f}});var r=n(72234),o=n(68147),a=n(56106),l=n(25983),c=n(52983),u=n(43077),i=n(33284),s=n(62573);let d=()=>{let e=(0,s.Q)(),t=(0,i.H)();return(0,c.useCallback)(n=>{let r=e(n);return r?{...r,fromView:"thumbnail_".concat(r.fromView),uuid:r.uuid}:{...t}},[e,t])},f=()=>{let e=(0,l.ZK)(),t=(0,o.I)(),n=(0,a.H)(),i=(0,r.Lh)(),s=d();return(0,c.useCallback)(r=>{let{resourceId:o,isResourcePremium:a,resourceType:l,downloadType:c="download",variant:d,fileType:f}=r,{fromView:m,collectionId:v,page:h,position:g,uuid:p}=s(o);u.s.send("download",{language:e,id:"".concat(o),resourcePremium:a?"1":"0",format:m||"detail",resourceType:l,...v&&{collectionId:"".concat(v)},...h&&{page:"".concat(h)},...void 0!==g&&{position:"".concat(g)},...c&&{downloadType:c},...t&&{userid:"".concat(t),userPremium:n?"1":"0"},...p&&{uuid:p},...d&&{variant:d},...f&&{fileType:f},...i&&{wallet_id:i}})},[s,e,t,n,i])}},6715:function(e,t,n){n.d(t,{O:function(){return u}});var r=n(26219),o=n(52983),a=n(5704),l=n(7009);let c={photo:"regular",vector:"regular",ai:"regular",psd:"psd"},u=()=>{let e=(0,a.Jn)("term")||"",t=(0,l.J)();return(0,o.useCallback)((n,o,a)=>{let l="send&event&click-".concat(o).concat(e?"&".concat(e):"","&").concat(n).concat(a?"&".concat(c[a]):"").concat(t);(0,r.O)(l)},[e,t])}},62573:function(e,t,n){n.d(t,{Q:function(){return l}});var r=n(52983),o=n(81612),a=n(26140);let l=()=>{let e=(0,a.Q)(),t=(0,o.N)(null==e?void 0:e.itemsPerPage,null==e?void 0:e.page);return(0,r.useCallback)(n=>{if(!e)return null;let{fromView:r,collectionId:o,page:a,items:l,uuid:c}=e,u=l.findIndex(e=>{let{id:t}=e;return n===t}),{positionRelative:i}=t(u),s=(null==e?void 0:e.itemsPerPage)?Math.floor(u/e.itemsPerPage)+(null!=a?a:1):a;return{fromView:r,...o&&{collectionId:o},...s&&{page:s},...i>-1&&{position:i},...c&&{uuid:c}}},[t,e])}},7009:function(e,t,n){n.d(t,{J:function(){return o}});var r=n(72234);let o=()=>{let e=(0,r.Lh)();return e?"&wallet_id=".concat(e):""}},2983:function(e,t,n){n.d(t,{B:function(){return o}});var r=n(26219);let o=(e,t)=>{if("3d"===e||"font"===e)return;"icon"!==e&&"video"!==e&&(e="regular");let n="send&event&detail&type=".concat(e,"&button_click=").concat(t,"&event_at=").concat(new Date().getTime());(0,r.O)(n)}},63202:function(e,t,n){n.d(t,{c:function(){return r}});let r=async(e,t,n,r)=>{let o=r?new Headers:void 0;return(null==r?void 0:r.locale)&&o&&o.set("accept-language",r.locale),(null==r?void 0:r.cache)&&o&&o.set("cache",r.cache),fetch(e,{method:t,...n&&{body:JSON.stringify(n)},...r&&{...r,headers:o}}).then(async e=>e.ok?{success:!0,data:204===e.status?null:await e.json()}:400===e.status?{success:!1,data:e.statusText}:401===e.status||405===e.status?{success:!1,data:"AUTHENTICATION_ERROR"}:403===e.status?{success:!1,data:"FORBIDDEN"}:500===e.status?{success:!1,data:"INTERNAL_SERVER_ERROR"}:404===e.status?{success:!1,data:"NOT_FOUND"}:429===e.status?{success:!1,data:"TOO_MANY_REQUESTS"}:{success:!1,data:await e.json()})}},11645:function(e,t,n){n.d(t,{u:function(){return a}});var r=n(52983),o=n(8147);let a=()=>{let e=(0,o.H)();return(0,r.useCallback)(t=>{if(!e)return!0;try{let n=e.disabledPermissionsTools;if(!n)return console.error(JSON.stringify({fatal_error:"Error checking tool permission for ".concat(t," from wallet ").concat(e.walletId),error:"Disabled permissions tools not found"})),!0;return!(t in n)}catch(n){return console.error(JSON.stringify({fatal_error:"Error checking tool permission for ".concat(t," from wallet ").concat(e.walletId),error:n})),!0}},[e])}},43186:function(e,t,n){n.d(t,{J:function(){return i}});var r=n(52983);let o=async e=>{let{walletId:t}=e,n=await fetch(t?"/api/user/downloads/limit?walletId=".concat(t):"/api/user/downloads/limit");return n.ok?{success:!0,data:await n.json()}:401===n.status||403===n.status||405===n.status?{success:!1,data:"AUTHENTICATION_ERROR"}:404===n.status?{success:!1,data:"NOT_FOUND"}:{success:!1,data:"UNKNOWN_ERROR"}};var a=n(1850);a.z.object({data:a.z.object({filename:a.z.string(),url:a.z.string(),today_downloads:a.z.number(),download_limit:a.z.number()}).transform(e=>{let{download_limit:t,today_downloads:n,...r}=e;return{todayDownloads:n,downloadLimit:t,...r}})}),a.z.object({data:a.z.object({current:a.z.number(),limit:a.z.number()})}).transform(e=>{let{data:t}=e;return t});var l=n(72234),c=n(28380),u=n(6476);let i=()=>{let e=(0,l.Lh)(),t=(0,u.aj)();return(0,r.useCallback)(async()=>{let{success:n,data:r}=await o({walletId:e});if(!n)throw Error("Error fetching user download info");let a={downloads:(null==r?void 0:r.current)||0,limit:(null==r?void 0:r.limit)||0};return t(a),c.f.update({downloads:a.downloads,limit_downloads:a.limit}),a},[t,e])}},85229:function(e,t,n){n.d(t,{l:function(){return l}});var r=n(7616),o=n(72234);let a=(0,n(24399).cn)(!1),l=()=>{let{isUnpaid:e}=(0,o.RI)(),[t,n]=(0,r.KO)(a);return{isUserWinback:e,isOpenWinbackModal:t,showWinbackModal:()=>n(!0),hideWinbackModal:()=>n(!1)}}}}]);